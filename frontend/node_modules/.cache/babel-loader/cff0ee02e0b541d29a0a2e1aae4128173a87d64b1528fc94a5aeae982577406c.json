{"ast":null,"code":"import _objectSpread from\"/Users/elarh/Desktop/Margav Energy CRM/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const CallSimulator=_ref=>{let{onLeadInterest,onCallEnd}=_ref;const[callData,setCallData]=useState({isActive:false,duration:0});const[currentLead,setCurrentLead]=useState(null);// Mock lead data for simulation\nconst mockLeads=[{id:999,full_name:'John Smith',phone:'+1234567890',email:'john.smith@email.com',status:'interested',assigned_agent:1,assigned_agent_name:'Current Agent',assigned_agent_username:'agent1',notes:'Mock lead for call simulation',created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{id:998,full_name:'Sarah Johnson',phone:'+1234567891',email:'sarah.johnson@email.com',status:'interested',assigned_agent:1,assigned_agent_name:'Current Agent',assigned_agent_username:'agent1',notes:'Mock lead for call simulation',created_at:new Date().toISOString(),updated_at:new Date().toISOString()}];useEffect(()=>{let interval;if(callData.isActive){interval=setInterval(()=>{setCallData(prev=>_objectSpread(_objectSpread({},prev),{},{duration:prev.duration+1}));},1000);}return()=>{if(interval){clearInterval(interval);}};},[callData.isActive]);const startCall=()=>{const randomLead=mockLeads[Math.floor(Math.random()*mockLeads.length)];setCurrentLead(randomLead);setCallData({isActive:true,lead:randomLead,duration:0});};const endCall=()=>{setCallData({isActive:false,duration:0});setCurrentLead(null);onCallEnd();};const handleLeadInterest=()=>{if(currentLead){onLeadInterest(currentLead);endCall();}};const formatTime=seconds=>{const mins=Math.floor(seconds/60);const secs=seconds%60;return\"\".concat(mins.toString().padStart(2,'0'),\":\").concat(secs.toString().padStart(2,'0'));};if(callData.isActive&&currentLead){return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-green-50 border border-green-200 rounded-lg p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-green-800\",children:\"Active Call\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-3 h-3 bg-green-500 rounded-full animate-pulse\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-mono text-green-700\",children:formatTime(callData.duration)})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg p-4 mb-4\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium text-gray-900\",children:currentLead.full_name}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:currentLead.phone}),currentLead.email&&/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:currentLead.email})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-3\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleLeadInterest,className:\"flex-1 bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-md text-sm font-medium transition-colors\",children:\"Lead Shows Interest\"}),/*#__PURE__*/_jsx(\"button\",{onClick:endCall,className:\"flex-1 bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-md text-sm font-medium transition-colors\",children:\"End Call\"})]})]});}return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 border border-gray-200 rounded-lg p-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-4\",children:\"Call Simulator\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 mb-4\",children:\"Simulate an incoming call to test the lead management workflow.\"}),/*#__PURE__*/_jsx(\"button\",{onClick:startCall,className:\"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md text-sm font-medium transition-colors\",children:\"Start Mock Call\"})]});};export default CallSimulator;","map":{"version":3,"names":["React","useState","useEffect","jsx","_jsx","jsxs","_jsxs","CallSimulator","_ref","onLeadInterest","onCallEnd","callData","setCallData","isActive","duration","currentLead","setCurrentLead","mockLeads","id","full_name","phone","email","status","assigned_agent","assigned_agent_name","assigned_agent_username","notes","created_at","Date","toISOString","updated_at","interval","setInterval","prev","_objectSpread","clearInterval","startCall","randomLead","Math","floor","random","length","lead","endCall","handleLeadInterest","formatTime","seconds","mins","secs","concat","toString","padStart","className","children","onClick"],"sources":["/Users/elarh/Desktop/Margav Energy CRM/frontend/src/components/CallSimulator.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Lead, CallData } from '../types';\n\ninterface CallSimulatorProps {\n  onLeadInterest: (lead: Lead) => void;\n  onCallEnd: () => void;\n}\n\nconst CallSimulator: React.FC<CallSimulatorProps> = ({ onLeadInterest, onCallEnd }) => {\n  const [callData, setCallData] = useState<CallData>({\n    isActive: false,\n    duration: 0,\n  });\n  const [currentLead, setCurrentLead] = useState<Lead | null>(null);\n\n  // Mock lead data for simulation\n  const mockLeads: Lead[] = [\n    {\n      id: 999,\n      full_name: 'John Smith',\n      phone: '+1234567890',\n      email: 'john.smith@email.com',\n      status: 'interested',\n      assigned_agent: 1,\n      assigned_agent_name: 'Current Agent',\n      assigned_agent_username: 'agent1',\n      notes: 'Mock lead for call simulation',\n      created_at: new Date().toISOString(),\n      updated_at: new Date().toISOString(),\n    },\n    {\n      id: 998,\n      full_name: 'Sarah Johnson',\n      phone: '+1234567891',\n      email: 'sarah.johnson@email.com',\n      status: 'interested',\n      assigned_agent: 1,\n      assigned_agent_name: 'Current Agent',\n      assigned_agent_username: 'agent1',\n      notes: 'Mock lead for call simulation',\n      created_at: new Date().toISOString(),\n      updated_at: new Date().toISOString(),\n    },\n  ];\n\n  useEffect(() => {\n    let interval: NodeJS.Timeout;\n    \n    if (callData.isActive) {\n      interval = setInterval(() => {\n        setCallData(prev => ({\n          ...prev,\n          duration: prev.duration + 1,\n        }));\n      }, 1000);\n    }\n\n    return () => {\n      if (interval) {\n        clearInterval(interval);\n      }\n    };\n  }, [callData.isActive]);\n\n  const startCall = () => {\n    const randomLead = mockLeads[Math.floor(Math.random() * mockLeads.length)];\n    setCurrentLead(randomLead);\n    setCallData({\n      isActive: true,\n      lead: randomLead,\n      duration: 0,\n    });\n  };\n\n  const endCall = () => {\n    setCallData({\n      isActive: false,\n      duration: 0,\n    });\n    setCurrentLead(null);\n    onCallEnd();\n  };\n\n  const handleLeadInterest = () => {\n    if (currentLead) {\n      onLeadInterest(currentLead);\n      endCall();\n    }\n  };\n\n  const formatTime = (seconds: number) => {\n    const mins = Math.floor(seconds / 60);\n    const secs = seconds % 60;\n    return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;\n  };\n\n  if (callData.isActive && currentLead) {\n    return (\n      <div className=\"bg-green-50 border border-green-200 rounded-lg p-6\">\n        <div className=\"flex items-center justify-between mb-4\">\n          <h3 className=\"text-lg font-medium text-green-800\">Active Call</h3>\n          <div className=\"flex items-center space-x-2\">\n            <div className=\"w-3 h-3 bg-green-500 rounded-full animate-pulse\"></div>\n            <span className=\"text-sm font-mono text-green-700\">{formatTime(callData.duration)}</span>\n          </div>\n        </div>\n\n        <div className=\"bg-white rounded-lg p-4 mb-4\">\n          <h4 className=\"font-medium text-gray-900\">{currentLead.full_name}</h4>\n          <p className=\"text-sm text-gray-600\">{currentLead.phone}</p>\n          {currentLead.email && (\n            <p className=\"text-sm text-gray-600\">{currentLead.email}</p>\n          )}\n        </div>\n\n        <div className=\"flex space-x-3\">\n          <button\n            onClick={handleLeadInterest}\n            className=\"flex-1 bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-md text-sm font-medium transition-colors\"\n          >\n            Lead Shows Interest\n          </button>\n          <button\n            onClick={endCall}\n            className=\"flex-1 bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-md text-sm font-medium transition-colors\"\n          >\n            End Call\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"bg-gray-50 border border-gray-200 rounded-lg p-6\">\n      <h3 className=\"text-lg font-medium text-gray-900 mb-4\">Call Simulator</h3>\n      <p className=\"text-sm text-gray-600 mb-4\">\n        Simulate an incoming call to test the lead management workflow.\n      </p>\n      <button\n        onClick={startCall}\n        className=\"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md text-sm font-medium transition-colors\"\n      >\n        Start Mock Call\n      </button>\n    </div>\n  );\n};\n\nexport default CallSimulator;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}